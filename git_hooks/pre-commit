set -e

echo 'ğŸ§ª running cli cargo test...'
cargo test

echo 'ğŸ§¹ running cargo fmt...'
cargo fmt

echo 'ğŸ” running cargo clippy...'
cargo clippy -- -D warnings

echo 'ğŸ§ª running backend cargo test...'
cargo test --manifest-path src/backend/Cargo.toml

echo 'ğŸ§¹ running backend cargo fmt...'
cargo fmt --manifest-path src/backend/Cargo.toml

echo 'ğŸ” running backend cargo clippy...'
cargo clippy --manifest-path src/backend/Cargo.toml -- -D warnings

echo 'ğŸ§¹ running frontend project lint...'
npm run lint:staged --prefix src/frontend/

echo 'ğŸ§ª running related frontend vitest...'
npm run test:related --prefix src/frontend/

echo '----- Done -----'